"use strict";angular.module("coq",["ngResource","ngSanitize"]),angular.module("coq").config(["$provide",function(a){a.decorator("$resource",function(a){var b=function(){var b=arguments[0],c=[],d=b.split("/"),e=a.apply(a,arguments);return angular.forEach(d,function(a){":"===a[0]&&c.push(a.substr(1))}),e.$$routeVariables=c,e};return b})}]),angular.module("coq").directive("CoqModel",function(){return{scope:{forUsers:"=",redirectPath:"@"},restrict:"A"}}),angular.module("coq").provider("Coq",function(){function a(a,b){if(angular.isObject(a)||1!==b.$resource.$$routeVariables.length)return a;var c=!1,d={};return angular.forEach(b.$resource.$$routeVariables,function(a){angular.forEach(b.$attributesDefinition,function(b,d){a===d&&(c=d)})}),c?(d[c]=a,d):a}this.$conditionBuilder=a,this.$get=["$q",function(a){function b(a){angular.isObject(a)&&angular.forEach(a,function(a,b){angular.isFunction(a)||"$"===b[0]||-1===Object.keys(this.constructor.$attributesDefinition).indexOf(b)||(console.log("add",b,a),this[b]=a)},this),this.save=function(){return this.$resource.save(this.$toObject()).$promise},this.destroy=function(){return this.$resource["delete"](this.$toObject()).$promise},angular.isFunction(this.$resource.update)&&(this.update=function(){return this.$resource.$update({},this.$toObject()).$promise}),this.$toObject=function(){var a={};return angular.forEach(this,function(b,c){!angular.isFunction(b)&&this.hasOwnProperty(c)&&-1!==Object.keys(this.constructor.$attributesDefinition).indexOf(c)&&(a[c]=b)},this),a}}function c(b,c){b.find=function(d){var e=a.defer();return d=g.$conditionBuilder(d,b),c.get(d,function(a){var d=new b(a);d.$resource=c,e.resolve(d)},e.reject),e.promise},b.all=function(){var d=a.defer();return c.query(function(a){var e=[];angular.forEach(a,function(a){var d=new b(a);d.$resource=c,e.push(d)}),d.resolve(e)},d.reject),d.promise}}function d(a){function d(){d.superconstructor.apply(this,arguments)}if(!angular.isObject(a))throw new Error("config parameter missing");if(!a.$resource||!a.$resource.$$routeVariables)throw new Error("model declaration : resource object invalid");extend(d,b);var g=angular.copy(a);angular.forEach(a,function(a,b){-1!==e.indexOf(b)&&delete g[b]}),angular.extend(d.prototype,g);var h={};return angular.isObject(a.$statics)&&(angular.forEach(a.$statics,function(a,b){-1===f.indexOf(b)&&(h[b]=a)}),angular.extend(d,h)),d.$resource=a.$resource,c(d,d.$resource),d.$attributesDefinition=a.$attributes||{},d}var e=["$attributes","$statics"],f=["find","all"],g=this;return{factory:d}}]});